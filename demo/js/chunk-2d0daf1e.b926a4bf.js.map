{"version":3,"sources":["webpack:///./node_modules/chartjs-plugin-funnel/dist/chart.funnel.js"],"names":["f","module","exports","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","1","2","Chart","window","3","helpers","defaults","funnel","hover","mode","sort","gap","bottomWidth","topWidth","keep","elements","borderWidth","tooltips","callbacks","title","tooltipItem","data","label","labels","index","datasets","datasetIndex","legendCallback","chart","text","push","id","backgroundColor","join","legend","generateLabels","map","meta","getDatasetMeta","ds","trap","custom","getValueAtIndexOrDefault","trapeziumOpts","options","trapezium","fill","stroke","borderColor","bw","fillStyle","strokeStyle","lineWidth","hidden","isNaN","_index","onClick","legendItem","ilen","this","update","scales","xAxes","position","type","display","categoryPercentage","barPercentage","offset","gridLines","offsetGridLines","yAxes","controllers","DatasetController","extend","dataElementType","Trapezium","initialize","bar","prototype","substr","dataset","dataPositions","slice","each","item","value","b","keys","Object","len","key","arr","hasOwnProperty","Array","isArray","sortedArr","linkScales","me","getMeta","getDataset","yAxisID","xAxisID","reset","chartArea","opts","availableWidth","right","left","availableHeight","bottom","top","valAndLabels","visiableNum","dMax","val","orgIndex","dwRatio","_viewIndex","dal","elHeight","updateElement","x","y","x1","x2","upperWidth","elementType","elementData","viewIndex","base","_xScale","getScaleForId","nextElement","findNextWhere","el","previousElement","findPreviousWhere","_datasetIndex","_model","pivot","removeHoverStyle","4","globalOpts","global","defaultColor","borderSkipped","pointInPolygon","point","vs","inside","j","xi","yi","xj","yj","intersect","Rectangle","getCorners","vm","_view","globalOptionTrapeziumElements","corners","upHalfWidth","botHalfWidth","halfStroke","draw","ctx","_chart","_cornersCache","beginPath","borders","startCorner","indexOf","cornerAt","moveTo","apply","lineTo","height","inRange","mouseX","mouseY","inLabelRange","maxWidth","Math","max","tooltipPosition","getArea","total","l","addX","addY","subX","subY","abs","getCenterPoint","point1","point2"],"mappings":"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","file":"js/chunk-2d0daf1e.b926a4bf.js","sourcesContent":["/*!\r\n * Chart.Funnel.js\r\n * A funnel plugin for Chart.js(http://chartjs.org/)\r\n * Version: 1.1.5\r\n *\r\n * Copyright 2016 Jone Casaper & YetiForce\r\n * Released under the MIT license\r\n * https://github.com/xch89820/Chart.Funnel.js/blob/master/LICENSE.md\r\n */\r\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}(g.Chart || (g.Chart = {})).Funnel = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\r\n\r\n},{}],2:[function(require,module,exports){\r\n/**\r\n *\r\n * Main file of Chart.Funnel.js\r\n * @author Jone Casper\r\n * @email xu.chenhui@live.com\r\n *\r\n */\r\n\r\n/* global window */\r\n\"use strict\";\r\n\r\nvar Chart = require(1);\r\nChart = typeof(Chart) === 'function' ? Chart : window.Chart;\r\n\r\nrequire(4)(Chart);\r\nrequire(3)(Chart);\r\n\r\nmodule.exports = Chart;\r\n},{\"1\":1,\"3\":3,\"4\":4}],3:[function(require,module,exports){\r\n/**\r\n *\r\n * Extend funnel Charts\r\n * @author Jone Casper\r\n * @email xu.chenhui@live.com\r\n *\r\n * @example\r\n * var data = {\r\n *  labels: [\"A\", \"B\", \"C\"],\r\n * \tdatasets: [{\r\n * \t  data: [300, 50, 100],\r\n * \t  backgroundColor: [\r\n *       \"#FF6384\",\r\n *       \"#36A2EB\",\r\n *       \"#FFCE56\"\r\n *    ],\r\n *    hoverBackgroundColor: [\r\n *        \"#FF6384\",\r\n *        \"#36A2EB\",\r\n *        \"#FFCE56\"\r\n *    ]\r\n * \t}]\r\n * }\r\n *\r\n */\r\n\r\n\"use strict\";\r\n\r\nmodule.exports = function (Chart) {\r\n\tvar helpers = Chart.helpers;\r\n\r\n\tChart.defaults.funnel = {\r\n\t\thover: {\r\n\t\t\tmode: \"label\"\r\n\t\t},\r\n\t\tsort: 'asc', // sort options: 'asc', 'desc'\r\n\t\tgap: 0,\r\n\t\tbottomWidth: null, // the bottom width of funnel\r\n\t\ttopWidth: 0, // the top width of funnel\r\n\t\tkeep: 'auto', // Keep left or right\r\n\t\telements: {\r\n\t\t\tborderWidth: 0\r\n\t\t},\r\n\t\ttooltips: {\r\n\t\t\tcallbacks: {\r\n\t\t\t\ttitle: function (tooltipItem, data) {\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t},\r\n\t\t\t\tlabel: function (tooltipItem, data) {\r\n\t\t\t\t\treturn data.labels[tooltipItem.index] + ': ' + data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tlegendCallback: function (chart) {\r\n\t\t\tvar text = [];\r\n\t\t\ttext.push('<ul class=\"' + chart.id + '-legend\">');\r\n\r\n\t\t\tvar data = chart.data;\r\n\t\t\tvar datasets = data.datasets;\r\n\t\t\tvar labels = data.labels;\r\n\r\n\t\t\tif (datasets.length) {\r\n\t\t\t\tfor (var i = 0; i < datasets[0].data.length; ++i) {\r\n\t\t\t\t\ttext.push('<li><span style=\"background-color:' + datasets[0].backgroundColor[i] + '\"></span>');\r\n\t\t\t\t\tif (labels[i]) {\r\n\t\t\t\t\t\ttext.push(labels[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttext.push('</li>');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttext.push('</ul>');\r\n\t\t\treturn text.join(\"\");\r\n\t\t},\r\n\t\tlegend: {\r\n\t\t\tlabels: {\r\n\t\t\t\tgenerateLabels: function (chart) {\r\n\t\t\t\t\tvar data = chart.data;\r\n\t\t\t\t\tif (data.labels.length && data.datasets.length) {\r\n\t\t\t\t\t\treturn data.labels.map(function (label, i) {\r\n\t\t\t\t\t\t\tvar meta = chart.getDatasetMeta(0);\r\n\t\t\t\t\t\t\tvar ds = data.datasets[0];\r\n\t\t\t\t\t\t\tvar trap = meta.data[i];\r\n\t\t\t\t\t\t\tvar custom = trap.custom || {};\r\n\t\t\t\t\t\t\tvar getValueAtIndexOrDefault = helpers.getValueAtIndexOrDefault;\r\n\t\t\t\t\t\t\tvar trapeziumOpts = chart.options.elements.trapezium;\r\n\t\t\t\t\t\t\tvar fill = custom.backgroundColor ? custom.backgroundColor : getValueAtIndexOrDefault(ds.backgroundColor, i, trapeziumOpts.backgroundColor);\r\n\t\t\t\t\t\t\tvar stroke = custom.borderColor ? custom.borderColor : getValueAtIndexOrDefault(ds.borderColor, i, trapeziumOpts.borderColor);\r\n\t\t\t\t\t\t\tvar bw = custom.borderWidth ? custom.borderWidth : getValueAtIndexOrDefault(ds.borderWidth, i, trapeziumOpts.borderWidth);\r\n\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\ttext: label,\r\n\t\t\t\t\t\t\t\tfillStyle: fill,\r\n\t\t\t\t\t\t\t\tstrokeStyle: stroke,\r\n\t\t\t\t\t\t\t\tlineWidth: bw,\r\n\t\t\t\t\t\t\t\thidden: isNaN(ds.data[i]) || meta.data[i].hidden,\r\n\r\n\t\t\t\t\t\t\t\t// Extra data used for toggling the correct item\r\n\t\t\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\t\t\t// Original Index\r\n\t\t\t\t\t\t\t\t_index: trap._index\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn [];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tonClick: function (e, legendItem) {\r\n\t\t\t\tvar index = legendItem.index;\r\n\t\t\t\tvar chart = this.chart;\r\n\t\t\t\tvar i, ilen, meta;\r\n\r\n\t\t\t\tfor (i = 0, ilen = (chart.data.datasets || []).length; i < ilen; ++i) {\r\n\t\t\t\t\tmeta = chart.getDatasetMeta(i);\r\n\t\t\t\t\tmeta.data[index].hidden = !meta.data[index].hidden;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tchart.update();\r\n\t\t\t}\r\n\t\t},\r\n\t\tscales: {\r\n\t\t\txAxes: [{\r\n\t\t\t\t\tposition: 'left',\r\n\t\t\t\t\ttype: 'category',\r\n\t\t\t\t\tdisplay: false,\r\n\t\t\t\t\t// Specific to Horizontal Bar Controller\r\n\t\t\t\t\tcategoryPercentage: 0.8,\r\n\t\t\t\t\tbarPercentage: 0.9,\r\n\r\n\t\t\t\t\t// offset settings\r\n\t\t\t\t\toffset: true,\r\n\r\n\t\t\t\t\t// grid line settings\r\n\t\t\t\t\tgridLines: {\r\n\t\t\t\t\t\toffsetGridLines: true\r\n\t\t\t\t\t}\r\n\t\t\t\t}],\r\n\t\t\tyAxes: [{\r\n\t\t\t\t\tposition: 'left',\r\n\t\t\t\t\ttype: 'category',\r\n\t\t\t\t\tdisplay: false,\r\n\t\t\t\t\t// Specific to Horizontal Bar Controller\r\n\t\t\t\t\tcategoryPercentage: 0.8,\r\n\t\t\t\t\tbarPercentage: 0.9,\r\n\r\n\t\t\t\t\t// offset settings\r\n\t\t\t\t\toffset: true,\r\n\r\n\t\t\t\t\t// grid line settings\r\n\t\t\t\t\tgridLines: {\r\n\t\t\t\t\t\toffsetGridLines: true\r\n\t\t\t\t\t}\r\n\t\t\t\t}]\r\n\t\t},\r\n\t};\r\n\r\n\tChart.controllers.funnel = Chart.DatasetController.extend({\r\n\r\n\t\tdataElementType: Chart.elements.Trapezium,\r\n\r\n\t\tinitialize: function (chart, datasetIndex) {\r\n\t\t\tChart.controllers.bar.prototype.initialize.call(this, chart, datasetIndex);\r\n\t\t\t// sort arrays\r\n\t\t\tif (typeof chart.options !== 'undefined' && typeof chart.options.sort !== 'undefined' && chart.options.sort.substr(0, 4) !== 'data') {\r\n\t\t\t\tvar dataset = chart.data.datasets[datasetIndex];\r\n\t\t\t\tvar dataPositions = [];\r\n\t\t\t\tvar originalData = dataset.data.slice();\r\n\t\t\t\thelpers.each(dataset.data, function (item, index) {\r\n\t\t\t\t\tdataPositions.push({index, value: item});\r\n\t\t\t\t});\r\n\t\t\t\tdataPositions.sort(function (a, b) {\r\n\t\t\t\t\treturn chart.options.sort === 'asc' ? a.value - b.value : b.value - a.value;\r\n\t\t\t\t});\r\n\t\t\t\t// sort labels in the same manner as data sort order\r\n\t\t\t\tvar labels = chart.data.labels.map((value, index) => {\r\n\t\t\t\t\treturn chart.data.labels[ dataPositions[index].index ];\r\n\t\t\t\t});\r\n\t\t\t\tchart.data.labels = labels;\r\n\t\t\t\t// sort other arrays inside datasets\r\n\t\t\t\tvar keys = Object.keys(dataset);\r\n\t\t\t\tfor (var i = 0, len = keys.length; i < len; i++) {\r\n\t\t\t\t\tvar key = keys[i];\r\n\t\t\t\t\tvar arr = dataset[key];\r\n\t\t\t\t\tif (dataset.hasOwnProperty(key) && Array.isArray(arr)) {\r\n\t\t\t\t\t\tvar sortedArr = arr.map((item, index) => {\r\n\t\t\t\t\t\t\treturn arr[dataPositions[index].index];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tdataset[key] = sortedArr;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tlinkScales: function () {\r\n\t\t\tvar me = this;\r\n\t\t\tvar meta = me.getMeta();\r\n\t\t\tvar dataset = me.getDataset();\r\n\t\t\tif (meta.yAxisID === null || !(meta.yAxisID in me.chart.scales)) {\r\n\t\t\t\tmeta.yAxisID = dataset.yAxisID || me.chart.options.scales.yAxes[0].id;\r\n\t\t\t}\r\n\t\t\tif (meta.xAxisID === null || !(meta.xAxisID in me.chart.scales)) {\r\n\t\t\t\tmeta.xAxisID = dataset.xAxisID || me.chart.options.scales.xAxes[0].id;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tupdate: function update(reset) {\r\n\t\t\tvar me = this;\r\n\t\t\tvar chart = me.chart,\r\n\t\t\t\t\tchartArea = chart.chartArea,\r\n\t\t\t\t\topts = chart.options,\r\n\t\t\t\t\tmeta = me.getMeta(),\r\n\t\t\t\t\telements = meta.data,\r\n\t\t\t\t\tborderWidth = opts.elements.borderWidth || 0,\r\n\t\t\t\t\tavailableWidth = chartArea.right - chartArea.left - borderWidth * 2,\r\n\t\t\t\t\tavailableHeight = chartArea.bottom - chartArea.top - borderWidth * 2;\r\n\r\n\t\t\t// top and bottom width\r\n\t\t\tvar bottomWidth = availableWidth,\r\n\t\t\t\t\ttopWidth = (opts.topWidth < availableWidth ? opts.topWidth : availableWidth) || 0;\r\n\t\t\tif (opts.bottomWidth) {\r\n\t\t\t\tbottomWidth = opts.bottomWidth < availableWidth ? opts.bottomWidth : availableWidth;\r\n\t\t\t}\r\n\r\n\t\t\t// percentage calculation and sort data\r\n\t\t\tvar dataset = me.getDataset(),\r\n\t\t\t\t\tvalAndLabels = [],\r\n\t\t\t\t\tvisiableNum = 0,\r\n\t\t\t\t\tdMax = 0;\r\n\t\t\thelpers.each(dataset.data, function (val, index) {\r\n\t\t\t\tvar backgroundColor = helpers.getValueAtIndexOrDefault(dataset.backgroundColor, index),\r\n\t\t\t\t\t\thidden = elements[index].hidden;\r\n\t\t\t\tvalAndLabels.push({\r\n\t\t\t\t\thidden: hidden,\r\n\t\t\t\t\torgIndex: index,\r\n\t\t\t\t\tval: val,\r\n\t\t\t\t\tbackgroundColor: backgroundColor,\r\n\t\t\t\t\tborderColor: helpers.getValueAtIndexOrDefault(dataset.borderColor, index, backgroundColor),\r\n\t\t\t\t\tlabel: helpers.getValueAtIndexOrDefault(dataset.label, index, chart.data.labels[index])\r\n\t\t\t\t});\r\n\t\t\t\tif (!elements[index].hidden) {\r\n\t\t\t\t\tvisiableNum++;\r\n\t\t\t\t\tdMax = val > dMax ? val : dMax;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tvar dwRatio = bottomWidth / dMax;\r\n\t\t\t// For render hidden view\r\n\t\t\tvar _viewIndex = 0;\r\n\t\t\thelpers.each(valAndLabels, function (dal, index) {\r\n\t\t\t\tdal._viewIndex = !dal.hidden ? _viewIndex++ : -1;\r\n\t\t\t});\r\n\t\t\t// Elements height calculation\r\n\t\t\tvar gap = opts.gap || 0,\r\n\t\t\t\t\telHeight = (availableHeight - ((visiableNum - 1) * gap)) / visiableNum;\r\n\r\n\t\t\t// save\r\n\t\t\tme.topWidth = topWidth;\r\n\t\t\tme.dwRatio = dwRatio;\r\n\t\t\tme.elHeight = elHeight;\r\n\t\t\tme.valAndLabels = valAndLabels;\r\n\t\t\thelpers.each(elements, function (trapezium, index) {\r\n\t\t\t\tme.updateElement(trapezium, index, reset);\r\n\t\t\t}, me);\r\n\t\t},\r\n\r\n\t\t// update elements\r\n\t\tupdateElement: function updateElement(trapezium, index, reset) {\r\n\t\t\tvar me = this,\r\n\t\t\t\t\tchart = me.chart,\r\n\t\t\t\t\tchartArea = chart.chartArea,\r\n\t\t\t\t\topts = chart.options,\r\n\t\t\t\t\tsort = opts.sort,\r\n\t\t\t\t\tdwRatio = me.dwRatio,\r\n\t\t\t\t\telHeight = me.elHeight,\r\n\t\t\t\t\tgap = opts.gap || 0,\r\n\t\t\t\t\tborderWidth = opts.elements.borderWidth || 0;\r\n\r\n\t\t\t// calculate x,y,base, width,etc.\r\n\t\t\tvar x, y, x1, x2,\r\n\t\t\t\t\telementType = 'isosceles',\r\n\t\t\t\t\telementData = me.valAndLabels[index], upperWidth, bottomWidth,\r\n\t\t\t\t\tviewIndex = elementData._viewIndex < 0 ? index : elementData._viewIndex,\r\n\t\t\t\t\tbase = chartArea.top + (viewIndex + 1) * (elHeight + gap) - gap;\r\n\r\n\t\t\tvar meta = me.getMeta();\r\n\t\t\ttrapezium._xScale = me.getScaleForId(meta.xAxisID);\r\n\r\n\t\t\tif (sort === 'asc' || sort === 'data-asc' || !sort) {\r\n\t\t\t\t// Find previous element which is visible\r\n\t\t\t\tvar previousElement = helpers.findPreviousWhere(me.valAndLabels,\r\n\t\t\t\t\t\tfunction (el) {\r\n\t\t\t\t\t\t\treturn !el.hidden;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tindex\r\n\t\t\t\t\t\t);\r\n\t\t\t\tupperWidth = previousElement ? previousElement.val * dwRatio : me.topWidth;\r\n\t\t\t\tbottomWidth = elementData.val * dwRatio;\r\n\t\t\t} else if (sort === 'desc' || sort === 'data-desc') {\r\n\t\t\t\tvar nextElement = helpers.findNextWhere(me.valAndLabels,\r\n\t\t\t\t\t\tfunction (el) {\r\n\t\t\t\t\t\t\treturn !el.hidden;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tindex\r\n\t\t\t\t\t\t);\r\n\t\t\t\tupperWidth = elementData.val * dwRatio;\r\n\t\t\t\tbottomWidth = nextElement ? nextElement.val * dwRatio : me.topWidth;\r\n\t\t\t}\r\n\r\n\t\t\ty = chartArea.top + elementData.orgIndex * (elHeight + gap);\r\n\t\t\tif (opts.keep === 'left') {\r\n\t\t\t\telementType = 'scalene';\r\n\t\t\t\tx1 = chartArea.left + upperWidth / 2;\r\n\t\t\t\tx2 = chartArea.left + bottomWidth / 2;\r\n\t\t\t\tx = x1;\r\n\t\t\t} else if (opts.keep === 'right') {\r\n\t\t\t\telementType = 'scalene';\r\n\t\t\t\tx1 = chartArea.right - upperWidth / 2;\r\n\t\t\t\tx2 = chartArea.right - bottomWidth / 2;\r\n\t\t\t\tx = x1;\r\n\t\t\t} else {\r\n\t\t\t\tx = (chartArea.left + chartArea.right) / 2;\r\n\t\t\t}\r\n\r\n\t\t\thelpers.extend(trapezium, {\r\n\t\t\t\t// Utility\r\n\t\t\t\t_datasetIndex: me.index,\r\n\t\t\t\t_index: elementData.orgIndex,\r\n\r\n\t\t\t\t// Desired view properties\r\n\t\t\t\t_model: {\r\n\t\t\t\t\ttype: elementType,\r\n\t\t\t\t\ty: y,\r\n\t\t\t\t\tbase: base > chartArea.bottom ? chartArea.bottom : base,\r\n\t\t\t\t\tx: x,\r\n\t\t\t\t\tx1: x1,\r\n\t\t\t\t\tx2: x2,\r\n\t\t\t\t\tupperWidth: (reset || !!elementData.hidden) ? 0 : upperWidth,\r\n\t\t\t\t\tbottomWidth: (reset || !!elementData.hidden) ? 0 : bottomWidth,\r\n\t\t\t\t\tborderWidth: borderWidth,\r\n\t\t\t\t\tbackgroundColor: elementData && elementData.backgroundColor,\r\n\t\t\t\t\tborderColor: elementData && elementData.borderColor,\r\n\t\t\t\t\tlabel: elementData && elementData.label\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\ttrapezium.pivot();\r\n\t\t},\r\n\t\tremoveHoverStyle: function (trapezium) {\r\n\t\t\tChart.DatasetController.prototype.removeHoverStyle.call(this, trapezium, this.chart.options.elements.trapezium);\r\n\t\t}\r\n\t});\r\n};\r\n\r\n},{}],4:[function(require,module,exports){\r\n/**\r\n *\r\n * Extend trapezium element\r\n * @author Jone Casper\r\n * @email xu.chenhui@live.com\r\n *\r\n */\r\n\r\n\"use strict\";\r\n\r\nmodule.exports = function (Chart) {\r\n\tvar helpers = Chart.helpers,\r\n\t\t\tglobalOpts = Chart.defaults.global;\r\n\r\n\tglobalOpts.elements.trapezium = {\r\n\t\tbackgroundColor: globalOpts.defaultColor,\r\n\t\tborderWidth: 0,\r\n\t\tborderColor: globalOpts.defaultColor,\r\n\t\tborderSkipped: 'bottom',\r\n\t\ttype: 'isosceles'  // isosceles, scalene\r\n\t};\r\n\r\n\t// Thanks for https://github.com/substack/point-in-polygon\r\n\tvar pointInPolygon = function (point, vs) {\r\n\t\t// ray-casting algorithm based on\r\n\t\t// http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\r\n\r\n\t\tvar x = point[0], y = point[1];\r\n\r\n\t\tvar inside = false;\r\n\t\tfor (var i = 0, j = vs.length - 1; i < vs.length; j = i++) {\r\n\t\t\tvar xi = vs[i][0], yi = vs[i][1];\r\n\t\t\tvar xj = vs[j][0], yj = vs[j][1];\r\n\r\n\t\t\tvar intersect = ((yi > y) != (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\r\n\t\t\tif (intersect)\r\n\t\t\t\tinside = !inside;\r\n\t\t}\r\n\r\n\t\treturn inside;\r\n\t};\r\n\r\n\tChart.elements.Trapezium = Chart.elements.Rectangle.extend({\r\n\t\tgetCorners: function () {\r\n\t\t\tvar vm = this._view;\r\n\t\t\tvar globalOptionTrapeziumElements = globalOpts.elements.trapezium;\r\n\r\n\t\t\tvar corners = [],\r\n\t\t\t\t\ttype = vm.type || globalOptionTrapeziumElements.type,\r\n\t\t\t\t\ttop = vm.y,\r\n\t\t\t\t\tborderWidth = vm.borderWidth || globalOptionTrapeziumElements.borderWidth,\r\n\t\t\t\t\tupHalfWidth = vm.upperWidth / 2,\r\n\t\t\t\t\tbotHalfWidth = vm.bottomWidth / 2,\r\n\t\t\t\t\thalfStroke = borderWidth / 2;\r\n\r\n\t\t\thalfStroke = halfStroke < 0 ? 0 : halfStroke;\r\n\r\n\t\t\t// An isosceles trapezium\r\n\t\t\tif (type == 'isosceles') {\r\n\t\t\t\tvar x = vm.x;\r\n\r\n\t\t\t\t// Corner points, from bottom-left to bottom-right clockwise\r\n\t\t\t\t// | 1 2 |\r\n\t\t\t\t// | 0 3 |\r\n\t\t\t\tcorners = [\r\n\t\t\t\t\t[x - botHalfWidth + halfStroke, vm.base],\r\n\t\t\t\t\t[x - upHalfWidth + halfStroke, top + halfStroke],\r\n\t\t\t\t\t[x + upHalfWidth - halfStroke, top + halfStroke],\r\n\t\t\t\t\t[x + botHalfWidth - halfStroke, vm.base]\r\n\t\t\t\t];\r\n\t\t\t} else if (type == 'scalene') {\r\n\t\t\t\tvar x1 = vm.x1,\r\n\t\t\t\t\t\tx2 = vm.x2;\r\n\r\n\t\t\t\tcorners = [\r\n\t\t\t\t\t[x2 - botHalfWidth + halfStroke, vm.base],\r\n\t\t\t\t\t[x1 - upHalfWidth + halfStroke, top + halfStroke],\r\n\t\t\t\t\t[x1 + upHalfWidth - halfStroke, top + halfStroke],\r\n\t\t\t\t\t[x2 + botHalfWidth - halfStroke, vm.base]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\r\n\r\n\t\t\treturn corners;\r\n\t\t},\r\n\t\tdraw: function () {\r\n\t\t\tvar ctx = this._chart.ctx;\r\n\t\t\tvar vm = this._view;\r\n\t\t\tvar globalOptionTrapeziumElements = globalOpts.elements.trapezium;\r\n\r\n\t\t\tvar corners = this.getCorners();\r\n\t\t\tthis._cornersCache = corners;\r\n\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.fillStyle = vm.backgroundColor || globalOptionTrapeziumElements.backgroundColor;\r\n\t\t\tctx.strokeStyle = vm.borderColor || globalOptionTrapeziumElements.borderColor;\r\n\t\t\tctx.lineWidth = vm.borderWidth || globalOptionTrapeziumElements.borderWidth;\r\n\r\n\t\t\t// Find first (starting) corner with fallback to 'bottom'\r\n\t\t\tvar borders = ['bottom', 'left', 'top', 'right'];\r\n\t\t\tvar startCorner = borders.indexOf(\r\n\t\t\t\t\tvm.borderSkipped || globalOptionTrapeziumElements.borderSkipped,\r\n\t\t\t\t\t0);\r\n\t\t\tif (startCorner === -1)\r\n\t\t\t\tstartCorner = 0;\r\n\r\n\t\t\tfunction cornerAt(index) {\r\n\t\t\t\treturn corners[(startCorner + index) % 4];\r\n\t\t\t}\r\n\r\n\t\t\t// Draw rectangle from 'startCorner'\r\n\t\t\tctx.moveTo.apply(ctx, cornerAt(0));\r\n\t\t\tfor (var i = 1; i < 4; i++)\r\n\t\t\t\tctx.lineTo.apply(ctx, cornerAt(i));\r\n\r\n\t\t\tctx.fill();\r\n\t\t\tif (vm.borderWidth) {\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t},\r\n\t\theight: function () {\r\n\t\t\tvar vm = this._view;\r\n\t\t\tif (!vm) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t\treturn vm.base - vm.y;\r\n\t\t},\r\n\t\tinRange: function (mouseX, mouseY) {\r\n\t\t\tvar vm = this._view;\r\n\t\t\tif (!vm) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar corners = this._cornersCache ? this._cornersCache : this.getCorners();\r\n\t\t\treturn pointInPolygon([mouseX, mouseY], corners);\r\n\t\t},\r\n\t\tinLabelRange: function (mouseX) {\r\n\t\t\tvar x,\r\n\t\t\t\t\tvm = this._view;\r\n\r\n\t\t\tif (!vm) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (vm.type == 'scalene') {\r\n\t\t\t\tif (vm.x1 > vm.x2) {\r\n\t\t\t\t\treturn mouseX >= vm.x2 - vm.bottomWidth / 2 && mouseX <= vm.x1 + vm.upperWidth / 2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn mouseX <= vm.x2 + vm.bottomWidth / 2 && mouseX >= vm.x1 - vm.upperWidth / 2;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar maxWidth = Math.max(vm.upperWidth, vm.bottomWidth);\r\n\t\t\treturn mouseX >= vm.x - maxWidth / 2 && mouseX <= vm.x + maxWidth / 2;\r\n\t\t},\r\n\t\ttooltipPosition: function () {\r\n\t\t\tvar vm = this._view;\r\n\t\t\treturn {\r\n\t\t\t\tx: vm.x || vm.x2,\r\n\t\t\t\ty: vm.base - (vm.base - vm.y) / 2\r\n\t\t\t};\r\n\t\t},\r\n\t\tgetArea: function () {\r\n\t\t\tvar vm = this._view;\r\n\t\t\tvar total = 0;\r\n\t\t\tvar corners = this._cornersCache ? this._cornersCache : this.getCorners();\r\n\t\t\tfor (var i = 0, l = corners.length; i < l; i++) {\r\n\t\t\t\tvar addX = corners[i][0];\r\n\t\t\t\tvar addY = corners[i == corners.length - 1 ? 0 : i + 1][1];\r\n\t\t\t\tvar subX = corners[i == corners.length - 1 ? 0 : i + 1][0];\r\n\t\t\t\tvar subY = corners[i][1];\r\n\t\t\t\ttotal += (addX * addY * 0.5);\r\n\t\t\t\ttotal -= (subX * subY * 0.5);\r\n\t\t\t}\r\n\t\t\treturn Math.abs(total);\r\n\t\t},\r\n\t\tgetCenterPoint: function () {\r\n\t\t\tvar corners = this._cornersCache ? this._cornersCache : this.getCorners();\r\n\t\t\tvar vm = this._view;\r\n\t\t\tvar x = 0, y = 0, i, j, f, point1, point2;\r\n\t\t\tfor (i = 0, j = corners.length - 1; i < corners.length; j = i, i++) {\r\n\t\t\t\tpoint1 = corners[i];\r\n\t\t\t\tpoint2 = corners[j];\r\n\t\t\t\tf = point1[0] * point2[1] - point2[0] * point1[1];\r\n\t\t\t\tx += (point1[0] + point2[0]) * f;\r\n\t\t\t\ty += (point1[1] + point2[1]) * f;\r\n\t\t\t}\r\n\t\t\tf = this.getArea() * 6;\r\n\t\t\treturn {x: x / f, y: y / f};\r\n\t\t},\r\n\t});\r\n};\r\n\r\n},{}]},{},[2])(2)\r\n});\r\n"],"sourceRoot":""}